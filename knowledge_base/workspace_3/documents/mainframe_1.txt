Mainframe Data Provisioning Standard: Customer Account Balances1. Introduction and Scope1.1 PurposeThis document specifies the standard for extracting and formatting Customer Account Balance data from the Mainframe Core Banking System (Source) for ingestion into the Enterprise Data Lake (Target). The standard ensures data integrity, consistency, and compliance during the transition from the EBCDIC/Packed Decimal environment to the ASCII/Distributed environment.1.2 ScopeThis standard covers the daily batch extraction of final, end-of-day balances for all active Current, Savings, and Loan Accounts, sourced from the Mainframeâ€™s primary account master file (e.g., VSAM KSDS or DB2 Table).1.3 Target Data FormatFile Format: Fixed-Width ASCII (EBCDIC conversion required)Delivery Protocol: Managed File Transfer (MFT) / SFTPEncoding: UTF-8 (from EBCDIC conversion)Naming Convention: CB_ACCT_BAL_YYYYMMDD_HHMMSS.dat2. Mainframe Source Data Model (Copybook)Mainframe data is defined by a Copybook (a COBOL structure definition). The extraction program must adhere precisely to this layout for field identification and extraction.2.1 COBOL Copybook DefinitionThe source data record structure is defined as follows:COBOL       01  ACCOUNT-BALANCE-RECORD.
           05  AB-CONTROL-FIELDS.
               10 AB-RECORD-TYPE           PIC X(02).  *> 'B1' for Balance
               10 AB-SYSTEM-ID             PIC X(03).  *> 'CBS'
           05  AB-ACCOUNT-KEY.
               10 AB-BRANCH-CODE           PIC 9(04).
               10 AB-ACCOUNT-NUMBER        PIC X(10).
           05  AB-CUSTOMER-ID             PIC X(12).   *> Link to Customer Master
           05  AB-BALANCE-DATA.
               10 AB-CURRENCY-CODE         PIC X(03).   *> E.g., 'USD', 'EUR'
               10 AB-AVAILABLE-BALANCE     PIC S9(15)V99 COMP-3.
               10 AB-LEDGER-BALANCE        PIC S9(15)V99 COMP-3.
               10 AB-HOLDS-AMOUNT          PIC S9(13)V99 COMP-3.
               10 AB-EXTRACT-DATE          PIC 9(08).   *> YYYYMMDD
           05  AB-FILLER                  PIC X(20).   *> Reserved for future use
2.2 Critical Field Conversion SpecificationThe transformation from the Mainframe native format (EBCDIC/COMP-3) to the target flat file format (ASCII/String) is the most critical step.Copybook Field NamePIC FormatMainframe Native TypeTarget ASCII TypeConversion RuleAB-ACCOUNT-NUMBERX(10)EBCDIC StringCHAR 10Direct EBCDIC to UTF-8 conversion.AB-AVAILABLE-BALANCES9(15)V99 COMP-3Signed Packed Decimal (8 Bytes)DECIMAL (17,2)Unpack, remove implied decimal, insert explicit decimal point, remove sign from string, and prefix with '+' or '-'.AB-EXTRACT-DATE9(08)Numeric Display (EBCDIC)DATE 8Format as YYYY-MM-DD.3. Sample Ingestion Data (Fixed-Width ASCII)This is a sample of the expected output file, showing two records. Fields are strictly positional based on the defined length.PositionLengthField Name (Target)Value (Record 1)Value (Record 2)1-22RecordTypeB1B13-53SystemIDCBSCBS6-94BranchCode0001000110-1910AccountNumber1234567890123456789120-3112CustomerIDCUST987654CUST98765532-343CurrencyCodeUSDEUR35-5117AvailableBalance+000000001500.25-000000000050.0052-6817LedgerBalance+000000001500.25+000000000100.0069-8517HoldsAmount+000000000000.00+000000000150.0086-9510ExtractDate2025-12-092025-12-0996-11520Filler(Blank)(Blank)Sample Data String (Record 1 - Concatenated):B1CBS00011234567890CUST987654USD+000000001500.25+000000001500.25+000000000000.002025-12-09          4. Extraction and Control Procedures4.1 Job Control and Scheduling (JCL)The extraction process must be executed via a scheduled Mainframe Job Control Language (JCL) routine, typically running immediately after the End-of-Day (EOD) batch cycle completes.JCL Step Name: EXPORTBALProgram Name: CBLEXT01 (COBOL Extraction Program)Pre-Requisite: Must execute successfully only after the EODPOST job step is complete.4.2 Data Integrity Checks (Internal to Mainframe)Before the data file is transferred, the extraction program must perform the following control total checks:Record Count: Total records in the output file must match the count of active accounts in the source DB2 table/VSAM file.Monetary Control Total: The sum of all extracted AB-LEDGER-BALANCE fields (signed) must match a known, reconciled control balance calculated internally by the EOD process.If Control Check Fails: The JCL job must FAIL with a return code of 8, and the transfer process must be aborted.4.3 Transfer and SecurityFile Format: The output file must be written as a sequential dataset (PS) with the RECFM=FB (Fixed Blocked) format on the Mainframe.Conversion: The file transfer utility (e.g., Connect:Direct or z/OS FTP) must be configured to perform an EBCDIC to ASCII conversion and strip trailing spaces before the file is placed on the target SFTP server.Security: The MFT process must use TLS/SSL encryption and strong mutual authentication (keys) for the transfer to the Target System.

